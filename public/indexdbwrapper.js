"use strict";function promisifyRequest(e){return new Promise(function(r,t){function n(t){r(e.result),i()}function o(r){t(e.error),i()}function i(){e.removeEventListener("complete",n),e.removeEventListener("success",n),e.removeEventListener("error",o),e.removeEventListener("abort",o)}e.addEventListener("complete",n),e.addEventListener("success",n),e.addEventListener("error",o),e.addEventListener("abort",o)})}function IndexDBWrapper(e,r,t){var n=indexedDB.open(e,r);this.ready=promisifyRequest(n),n.onupgradeneeded=function(e){t(n.result,e.oldVersion)}}IndexDBWrapper.supported="indexedDB"in self;var IndexDBWrapperProto=IndexDBWrapper.prototype;IndexDBWrapperProto.transaction=function(e,r,t){return this.ready.then(function(n){var o="readonly";r.apply?t=r:r&&(o=r);var i,s=n.transaction(e,o),u=t(s,n),a=promisifyRequest(s);return u?(i=u[0]&&"result"in u[0]?Promise.all(u.map(promisifyRequest)):promisifyRequest(u),a.then(function(){return i})):a})},IndexDBWrapperProto.get=function(e,r){return this.transaction(e,function(t){return t.objectStore(e).get(r)})},IndexDBWrapperProto.put=function(e,r,t){return this.transaction(e,"readwrite",function(n){n.objectStore(e).put(t,r)})},IndexDBWrapperProto["delete"]=function(e,r){return this.transaction(e,"readwrite",function(t){t.objectStore(e)["delete"](r)})};
//# sourceMappingURL=indexdbwrapper.js.map